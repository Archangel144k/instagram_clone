<div class="max-w-lg mx-auto bg-gray-900 shadow-lg rounded-lg overflow-hidden">
  <div class="px-6 py-4 border-b border-gray-700">
    <h1 class="text-2xl font-bold text-teal-400 text-center">Create New Post</h1>
  </div>

  <% if @post.errors.any? %>
    <div class="bg-red-500 text-white p-4 rounded-lg mb-6">
      <h2 class="font-bold mb-2">There were errors with your submission:</h2>
      <ul class="list-disc list-inside">
        <% @post.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with model: @post, local: true, class: "p-6 space-y-6" do |f| %>
    <div>
      <%= f.label :title, "Post Title", class: "block text-sm font-medium text-gray-300 mb-2" %>
      <%= f.text_field :title, placeholder: "Enter a title for your post", class: "w-full bg-gray-800 text-gray-100 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-teal-500" %>
    </div>

    <div>
      <%= f.label :caption, "Caption", class: "block text-sm font-medium text-gray-300 mb-2" %>
      <%= f.text_area :caption, rows: 4, placeholder: "Write a caption...", class: "w-full bg-gray-800 text-gray-100 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-teal-500", id: "caption-field" %>
      <p id="caption-counter" class="text-sm text-gray-400 mt-2">0/2200 characters</p>
    </div>

    <div>
      <%= f.label :image, "Upload Image", class: "block text-sm font-medium text-gray-300 mb-2" %>
      <%= f.file_field :image, class: "w-full bg-gray-800 text-gray-100 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-teal-500", id: "image-upload" %>
      <div class="mt-4">
        <img id="image-preview" src="#" alt="Image Preview" class="hidden w-full h-auto rounded-lg border border-gray-700">
      </div>
    </div>

    <div class="flex justify-between">
      <%= link_to "Cancel", posts_path, class: "px-6 py-2 bg-gray-700 text-white font-semibold rounded-lg hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" %>
      <button type="submit" class="px-6 py-2 bg-teal-500 text-white font-semibold rounded-lg hover:bg-teal-600 transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2" id="submit-button">
        <span id="submit-text">Create Post</span>
        <span id="submit-spinner" class="hidden">
          <svg class="animate-spin h-5 w-5 text-white inline-block ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
          </svg>
        </span>
      </button>
    </div>
  <% end %>
</div>
