<div class="max-w-4xl mx-auto py-8 px-4 sm:py-12">
  <% if @user %>
    <!-- User Info -->
    <div class="flex items-center space-x-6 mb-6">
      <%= image_tag @user.avatar_url(size: 100), class: "h-24 w-24 rounded-full object-cover border-4 border-gray-700" %>
      <div>
        <h1 class="text-2xl font-bold text-gray-100"><%= @user.username %></h1>
        <p class="text-gray-400"><%= @user.bio %></p>
        <% if @user.website.present? %>
          <a href="<%= @user.website %>" target="_blank" class="text-teal-400 hover:text-teal-300">
            <%= @user.website %>
          </a>
        <% end %>
      </div>
    </div>
  <% else %>
    <p class="text-gray-400">User information is not available for this post.</p>
  <% end %>

  <!-- Post Content Section -->
  <% if @post %>
    <div class="bg-gray-900 rounded-xl shadow-xl overflow-hidden mb-8 border border-gray-800">
      <div class="flex flex-col md:flex-row">
        <!-- Post Image - Left Side -->
        <div class="md:w-2/3 bg-gray-800 flex items-center justify-center relative">
          <% if @post.image.attached? %>
            <%= image_tag @post.image, class: "w-full h-auto max-h-[calc(100vh-200px)] object-contain" %>
          <% else %>
            <div class="p-12 text-center text-gray-500">
              <i class="fas fa-image text-5xl mb-4 opacity-50"></i>
              <p>No image attached</p>
            </div>
          <% end %>
        </div>

        <!-- Post Details - Right Side -->
        <div class="md:w-1/3 p-6 flex flex-col">
          <!-- Post Author -->
          <% if @post.user %>
            <div class="flex items-center mb-4 pb-3 border-b border-gray-800">
              <%= link_to user_path(@post.user), class: "flex items-center group" do %>
                <div class="relative">
                  <%= image_tag @post.user.avatar_url(size: 40), class: "h-10 w-10 rounded-full object-cover border-2 border-gray-700 group-hover:border-teal-500 transition-colors" %>
                </div>
                <div class="ml-3">
                  <h3 class="font-semibold text-gray-100 group-hover:text-teal-400 transition-colors"><%= @post.user.username %></h3>
                </div>
              <% end %>
            </div>
          <% end %>

          <!-- Post Title and Caption -->
          <div class="flex-grow">
            <% if @post.title.present? %>
              <h1 class="text-xl font-bold bg-gradient-to-r from-teal-400 to-blue-400 bg-clip-text text-transparent mb-2"><%= @post.title %></h1>
            <% end %>
            <p class="text-gray-300 mb-4 leading-relaxed"><%= @post.caption %></p>
            <div class="text-gray-400 text-sm mb-6 flex items-center">
              <i class="far fa-clock mr-2 opacity-70"></i>
              <span><%= time_ago_in_words(@post.created_at) %> ago</span>
            </div>
          </div>

          <!-- Actions: Like, Comment, Save -->
          <div class="flex items-center space-x-6 border-t border-gray-800 pt-4">
            <!-- Like Button -->
            <div class="flex items-center space-x-2">
              <% if user_signed_in? %>
                <% if current_user.likes?(@post) %>
                  <%= button_to like_post_path(@post), method: :delete, remote: true, class: "text-red-500 hover:scale-110 transition-transform" do %>
                    <i class="fas fa-heart text-xl"></i>
                  <% end %>
                <% else %>
                  <%= button_to like_post_path(@post), method: :post, remote: true, class: "like-button text-gray-400 hover:text-red-500 hover:scale-110 transition-transform" do %>
                    <i class="far fa-heart text-xl"></i>
                  <% end %>
                <% end %>
              <% else %>
                <i class="far fa-heart text-gray-500 text-xl"></i>
              <% end %>
              <span class="text-sm text-gray-400"><%= @post.likes.count %> <%= 'like'.pluralize(@post.likes.count) %></span>
            </div>

            <!-- Save Button -->
            <div class="flex items-center space-x-2 ml-auto">
              <% if user_signed_in? %>
                <% if current_user.saved?(@post) %>
                  <%= button_to save_post_path(@post), method: :delete, remote: true, class: "text-teal-500 hover:scale-110 transition-transform" do %>
                    <i class="fas fa-bookmark text-xl"></i>
                  <% end %>
                <% else %>
                  <%= button_to save_post_path(@post), method: :post, remote: true, class: "save-button text-gray-400 hover:text-teal-500 hover:scale-110 transition-transform" do %>
                    <i class="far fa-bookmark text-xl"></i>
                  <% end %>
                <% end %>
              <% else %>
                <i class="far fa-bookmark text-gray-500 text-xl"></i>
              <% end %>
              <span class="text-sm text-gray-400">Save</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% else %>
    <div class="p-8 text-center">
      <p class="text-gray-400">This post is not available or has been deleted.</p>
    </div>
  <% end %>

  <!-- Back Button -->
  <div class="mt-8">
    <%= link_to :back, class: "inline-flex items-center bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-4 py-2 rounded-full transition-colors text-sm" do %>
      <i class="fas fa-arrow-left mr-2"></i> Back to feed
    <% end %>
  </div>
</div>
